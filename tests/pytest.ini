[tool:pytest]
minversion = 6.0
addopts = 
    -ra
    --cov=backend
    --cov-report=html:tests/coverage/html
    --cov-report=xml:tests/coverage/coverage.xml
    --cov-report=term-missing
    --cov-fail-under=90
    --strict-markers
    --strict-config
    --disable-warnings
    --tb=short
    -p no:warnings

testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

markers =
    unit: Unit tests - fast, isolated tests
    integration: Integration tests - database, API, external services
    e2e: End-to-end tests - full user journeys
    performance: Performance and load tests
    security: Security and vulnerability tests
    slow: Slow running tests (>1s)
    smoke: Smoke tests for production validation
    regression: Regression tests for bug fixes
    api: API endpoint tests
    database: Database operation tests
    workflow: Workflow engine tests
    forms: Form system tests
    auth: Authentication and authorization tests

filterwarnings =
    ignore::pytest.PytestUnraisableExceptionWarning
    ignore::DeprecationWarning
    ignore::UserWarning:requests.*

# Test discovery
norecursedirs = 
    .git
    .tox
    dist
    build
    *.egg
    .pytest_cache
    __pycache__
    node_modules

# Timeout for tests
timeout = 300
timeout_method = thread

# Parallel execution
-n auto